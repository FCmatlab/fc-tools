\documentclass[a4paper,10pt]{article}
\usepackage{etex}
\reserveinserts{28}
\usepackage{amscd}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{t1enc}
\usepackage{array}
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
\usepackage{scrextend}

\usepackage{pdfpages}

\usepackage{fcenv}
\usepackage{fcalgo}
\usepackage{fcmaths,fcinfo,fcutils,fcexrun}
%\input{fcgmsh}

\usepackage{ifthen}
\usepackage{fancyvrb}
\usepackage{hyperref}

\input{special/cmd.tex}
\immediate\write18{rsync -avu special/before.m .}


\ifthenelse{\equal{\fccmdname}{Octave}}{
  \usepackage[theme=blue]{cosmetic}
  \colorlet{codecolor}{mypresii}
}{
  \usepackage[theme=orange]{cosmetic}
  \colorlet{codecolor}{mypresi}
}

%\def\FCTOOLBOXDIR{\fctoolboxdir}
\input{common_def.tex}


%\def\ToolboxName{\fcbench}

\def\ToolboxName{\text{\includegraphics[height=1em]{\fclogoname}\ }}


\def\N{\texttt{N}}   % number of matrices
\def\nr{\texttt{nr}} % number of rows
\def\nc{\texttt{nc}} % number of column
\def\values{\texttt{values}} % array of N-by-nr-by-nc values


% \newcommand{\fccodedesc}[1]{\colorbox{mypresiii!15}{\fcmcode[breaklines=false]{#1}}}
% \newcommand{\fccodedescbox}[1]{\mbox{\fcmcode[breaklines=false]{#1}}}
% \newcommand{\fccodedesccolor}[2]{\colorbox{#1}{\color{mypresi}\fcmcode[breaklines=false]{#2}}}
% \newcommand{\fccode}[1]{\text{\fccodedesccolor{white}{#1}}}
% \newcommand{\fcmcode}[1]{\mbox{{\color{mypresi}\fcmcode[breaklines=false]{#1}}}}
% 
% \renewcommand{\fclstsetmatlab}{
% \lstset{language=MATLAB,%backgroundcolor=\color{mypresii!5},
%         frame=bt,
%         prebreak={ ...},breaklines=true,%
%         breakatwhitespace=true,
%         basicstyle=\color{mypresi}\ttfamily,%\small,
%         captionpos=above,commentstyle={\footnotesize\rmfamily\color{black}\rm},
%         escapeinside={}}
% }
\newcommand{\fccodedesc}[1]{\colorbox{mypresiii!15}{\lstinline[breaklines=false]{#1}}}
\newcommand{\fccodedescbox}[1]{\mbox{\lstinline[breaklines=false]{#1}}}
\newcommand{\fccodedesccolor}[2]{\colorbox{#1}{\color{codecolor}\lstinline[breaklines=false]{#2}}}
\newcommand{\fccode}[1]{\text{\fccodedesccolor{white}{#1}}}
\newcommand{\fcmcode}[1]{\mbox{{\color{codecolor}\lstinline[breaklines=false]{#1}}}}

\renewcommand{\fclstsetmatlab}{
\lstset{language=MATLAB,%backgroundcolor=\color{mypresii!5},
        frame=bt,
        prebreak={ ...},breaklines=true,%
        breakatwhitespace=true,
        basicstyle=\color{codecolor}\ttfamily,%\small,
        captionpos=above,commentstyle={\footnotesize\rmfamily\color{black}\rm},
        escapeinside={}}
}

% \IfFileExists{results/versions_\fccmdname\fccmdversionabr.out}{
%   \input{results/versions_\fccmdname\fccmdversionabr.out}
% }{
%   \newcommand{\fctoolsversion}{'dev'}
%   \newcommand{\fcbenchversion}{'dev'}
% }

\title{
\includegraphics[scale=0.5]{\fclogo}\\ \vspace{2.cm}
\ToolboxName \fccmdname\ \ToolboxPackageName, User's Guide\footnote{\fctitlefootnote.
}\\
\small{version \fctoolboxtag}
}

\author{François Cuvelier\thanks{LAGA,  UMR 7539, CNRS, Université Paris 13 - Sorbonne Paris Cité, Université Paris 8,
       99 Avenue J-B Clément, F-93430 Villetaneuse, France, cuvelier@math.univ-paris13.fr
       \newline \indent \indent This work was partially supported by the ANR project DEDALES under grant ANR-14-CE23-0005.}
} 
% 
% \title{
% \includegraphics[scale=0.5]{\fclogo}\\ \vspace{2.cm}
% \ToolboxName
% \fccmdname\ \ToolboxPackageName, User's Guide
% \footnote{Compiled with \fccmdname~\fccmdversion, with \ToolboxPackageNames\ \texttt{fc-bench}[\fcbenchversion]\ and \texttt{fc-tools}[\fctoolsversion]}
% }
% \author{François Cuvelier\thanks{Universit\'e Paris 13, Sorbonne Paris Cité, LAGA, CNRS UMR 7539,
%        99 Avenue J-B Clément, F-93430 Villetaneuse, France, cuvelier@math.univ-paris13.fr %} 
% %\and Gilles Scarella\hspace{0.15mm} \hspace{0.15mm}\thanks{Université Côte d'Azur, CNRS, LJAD, F-06108 Nice, France, 
% %       gilles.scarella@unice.fr. 
%       \newline \indent \indent This work was partially supported by the ANR project DEDALES under grant ANR-14-CE23-0005.} 
% } 
%\fvset{frame=lines,numbers=left,numbersep=3pt,fontshape=sl,fontsize}

\newcommand{\fcarrayset}[2]{
  \fcbmatsetdr{#2}{\K}{#1}
}
\newcommand{\fcarraysetspace}[3]{
  \fcbmatsetdr{#2}{#3}{#1}
}

\newcommand{\FCresize}[1]{
\par\noparindent
\begin{center}\fcresize{0.95}{1.4}{#1}
\end{center}
}


% \newcommand{\DDDarray}{3D-array}
% \newcommand{\DDDarrays}{3D-arrays}{
\renewcommand{\fcfnamefont}[1]{\ifmmode \text{\rmfamily\scshape#1}\else \rmfamily\scshape#1 \fi}


\newenvironment{fclstresize}{
  \begin{adjustbox}{width=0.8\textwidth,keepaspectratio}
  \begin{minipage}{1.2\textwidth}
  \begin{lstlisting}
}
{
  \end{lstlisting}
  \end{minipage}
  \end{adjustbox}
}

\immediate\write18{mkdir -p codes benchs results figures tabular special}

\setcounter{tocdepth}{2} % part,chapters,sections, subsections

\def\configremote{ssh://lagagit/MCS/Cuvelier/Matlab/fc-config}

\begin{document}

%\immediate\write18{ printf '%s' $(git ls-remote \configremote -g HEAD | cut -f 1)  }
%\immediate\write18{ echo '\string\\\string\\def\string\\\string\{'$(git ls-remote \configremote -g HEAD | cut -f 1)'\string\\\string\}' > fc-config.tex}
% \immediate\write18{ echo "\string\\\string\\def\string\\\string\\fcconfigcommit\string{$(git ls-remote ssh://lagagit/MCS/Cuvelier/Matlab/fc-config -g HEAD | cut -f 1)\string}" > fc-config.tex} 
% \immediate\write18{ echo "\string\\\string\\def\string\\\string\\fcconfigremote\string{ssh://lagagit/MCS/Cuvelier/Matlab/fc-config\string}" >> fc-config.tex} 



%%%%%%%%%%%%%%%
% To initialize title and version of packages
%   File before.m is create by "make before.m" or "make" command if in development mode
%   Otherwise it is create when using build_odoc or build_mdoc in fc-config package
\begin{filecontents*}{after.m}
\end{filecontents*}
\begin{filecontents*}{main.m}
[pkg,pkgs]=fc_tools.packages();
BuildVersions(pkg,pkgs);
\end{filecontents*}
\fcrun{codes/versions}[results/versions]
\input{results/versions_\fccmdname\fccmdversionabr.out}
%%%%%%%%%%%%%%%


\maketitle
\hspace{2.cm}

\begin{abstract}
The \ToolboxName \fccmdname\ \fctoolbox\ contains some basic tools used in my other \fctoolboxes.
\end{abstract}

\newpage
\tableofcontents

\newpage

% %>>>%%%% to initialize Matlab or Octave
% \IfFileExists{before.m}{}{
% \begin{filecontents*}{before.m}
% addpath ..
% fc_bench.init('verbose',0)
% \end{filecontents*}
% }
% %<<<%%%%
% \IfFileExists{after.m}{}{
% \begin{filecontents*}{after.m}
% \end{filecontents*}
% }

% \begin{filecontents*}{main.m}
% disp(sprintf('\\newcommand{\\fctoolsversion}{%s}',fc_tools.version()))
% disp(sprintf('\\newcommand{\\fcbenchversion}{%s}',fc_bench.version()))
% \end{filecontents*}
% \fcrun*{codes/versions}[results/versions]


\begin{filecontents*}{main.m}
fid=fopen('special/software.py','w');
fprintf(fid,'software=''%s''\n',fc_tools.sys.getSoftware());
fprintf(fid,'release=''%s''\n',fc_tools.sys.getRelease());
fclose(fid);
\end{filecontents*}
\fcrun{codes/software}

\fclstsetmatlab

\section{sys module}
\input{latex/sys.tex}
\section{graphics module}

\subsection{main functions}

\subsubsection[fc\_tools.graphics.display\_rgb function]{\fcmcode{fc_tools.graphics.display_rgb} function}
The \fcmcode{fc_tools.graphics.display_rgb} displays colors of a $n$-by-$3$ RGB colors array with their names
if available.
\paragraph{Syntaxe}
\begin{syntaxe}
fc_tools.graphics.display_rgb(rgb)
fc_tools.graphics.display_rgb(rgb, names)
\end{syntaxe}

\subsubsection[fc\_tools.graphics.selectColors function]{\fcmcode{fc_tools.graphics.selectColors} function}
The \fcmcode{fc_tools.graphics.selectColors} function returns colors that are maximally perceptually distinct
 without using the Image Processing Toolbox.
 
This function is inspired by the function \fcmcode{select_colors} (or \fcmcode{distinguishable_colors}) of
\textit{Timothy E. Holy} which uses the Image Processing Toolbox of Matlab.
\paragraph{Syntaxe}
\begin{syntaxe}
colors=fc_tools.graphics.selectColors(N)
colors=fc_tools.graphics.selectColors(N, key, value)
\end{syntaxe}
\paragraph{Description}
\begin{description}
\item \fbox{\fcmcode{colors=fc_tools.graphics.selectColors(N)}}
Returns \fcmcode{N} colors that are maximally perceptually distinct as a $\fcmcode{N}$-by-3 RGB colors array.
\item \fbox{\fcmcode{colors=fc_tools.graphics.selectColors(N, Name, Value)}}
specifies function options using one or more \fcmcode{Name},\fcmcode{Value} pair 
arguments. Options are
\begin{itemize}
\item[$\bullet$] \texttt{'background'} : the \fcmcode{N} colors selected will be as far as possible from the colors 
specified by this options as a $n$-by-3 RGB colors array. Default is \fcmcode{[1 1 1; 0 0 0; 0.8 0.8 0.8;1,0,1]}
\item[$\bullet$] \texttt{'func'} : To specify an other function for converting RGB colors to LAB colors.
Default is local \fcmcode{RGB2LAB} function.
\end{itemize}
\end{description}

\begin{filecontents*}{main.m}
colors1=fc_tools.graphics.selectColors(14);
figure(1)
fc_tools.graphics.display_rgb(colors1)
colors2=fc_tools.graphics.selectColors(14,'background',[1 1 1]);
figure(2)
fc_tools.graphics.display_rgb(colors2)
\end{filecontents*}
\begin{filecontents*}{after.m}
fc_tools.graphics.SaveAllFigsAsFiles('selectColors', SaveOptions{:})
\end{filecontents*}
\fcrun{figures/selectColors}

%{\tiny \verbatiminput{results/buildmesh2d01.txt}}
%\fcmatlaboutput{results/siMesh_plot01_\fccmdname\fccmdversionabr.m}{results/siMesh01.txt}
\begin{center}
\fbox{\begin{minipage}{0.95\textwidth}
\fcdblfigure{figures/selectColors_fig1_\fccmdname\fccmdversionabr}{figures/selectColors_fig2_\fccmdname\fccmdversionabr}
%\fcdblfigure{figures/plot2D_fig3_\fccmdname\fccmdversionabr}{figures/plot2D_fig4_\fccmdname\fccmdversionabr}
\par\noparindent\FClistingresize{\lstinputlisting[caption={\fcmcode{fc_tools.graphics.xcolor.selectColors} function \label{Lst:selectColors}}]
{figures/selectColors_\fccmdname\fccmdversionabr.m}}
\end{minipage}}
\end{center}

\begin{filecontents*}{main.m}
colors=fc_tools.graphics.selectColors(6);
x=0:pi/100:2*pi;
figure(1)
plot(x,cos(x),'color',colors(1,:),'Linewidth',1.5)
hold on
plot(x,sin(x),'color',colors(2,:),'Linewidth',1.5)
plot(x,cos(2*x),'color',colors(3,:),'Linewidth',1.5)
plot(x,sin(2*x),'color',colors(4,:),'Linewidth',1.5)
plot(x,cos(3*x),'color',colors(5,:),'Linewidth',1.5)
plot(x,sin(3*x),'color',colors(6,:),'Linewidth',1.5)
legend('cos(x)','sin(x)','cos(2x)','sin(2x)','cos(3x)','sin(3x)')
\end{filecontents*}
\begin{filecontents*}{after.m}
fc_tools.graphics.SaveAllFigsAsFiles('selectColors02', SaveOptions{:})
\end{filecontents*}
\fcrun{figures/selectColors02}

%{\tiny \verbatiminput{results/buildmesh2d01.txt}}
%\fcmatlaboutput{results/siMesh_plot01_\fccmdname\fccmdversionabr.m}{results/siMesh01.txt}
\begin{center}
\fbox{\begin{minipage}{0.95\textwidth}
\fcimagec{figures/selectColors02_fig1_\fccmdname\fccmdversionabr}{0.7\textwidth}
\par\noparindent\FClistingresize{\lstinputlisting[caption={\fcmcode{fc_tools.graphics.xcolor.selectColors} function \label{Lst:selectColors02}}]
{figures/selectColors02_\fccmdname\fccmdversionabr.m}}
\end{minipage}}
\end{center}




\subsubsection[fc\_tools.graphics.DisplayFigures function]{\fcmcode{fc_tools.graphics.DisplayFigures} function}
The \fcmcode{fc_tools.graphics.DisplayFigures} function regularly distributes the figures on the screen.
\paragraph{Syntaxe}
\begin{syntaxe}
fc_tools.graphics.DisplayFigures()
fc_tools.graphics.DisplayFigures(n)
fc_tools.graphics.DisplayFigures('nfig',n)
\end{syntaxe}
%\paragraph{Description}
%\begin{description}
Without argument, all figures are regularly distributed on the screen.
Otherwise, empty figures with numbers \fcmcode{1} to \fcmcode{n} are created and regularly distributed on the screen.
%\end{description}


\subsubsection[fc\_tools.graphics.SaveAllFigsAsFiles function]{\fcmcode{fc_tools.graphics.SaveAllFigsAsFiles} function}
The \fcmcode{fc_tools.graphics.SaveAllFigsAsFiles} saves all figures as files.

\paragraph{Syntaxe}
\begin{syntaxe}
fc_tools.graphics.SaveAllFigsAsFiles(basename)
fc_tools.graphics.SaveAllFigsAsFiles(file, key, value, ...)
\end{syntaxe}


\paragraph{Description}
\begin{description}
\item \fbox{\fcmcode{fc_tools.graphics.SaveAllFigsAsFiles(basename)}} save each figure in the file 
$$\fcmcode{[basename,'_fig',fignumber]}$$
of the current directory where \fcmcode{fignumber} is the number of the figure to be saved.
\item \fbox{\fcmcode{fc_tools.graphics.SaveAllFigsAsFiles(file, key, value, ...)}} specifies function options using one or more 
\fcmcode{Name},\fcmcode{Value} pair 
arguments. Options are
\begin{itemize}
\item[$\bullet$] \texttt{'format'} : to specify the file format. \fcmcode{Value} could be \fcmcode{'epsc'} (default), \fcmcode{'pdf'},
\fcmcode{'png'} or \fcmcode{'pdflatex'}.
\item[$\bullet$] \texttt{'dir'} : to specify the directory (default \fcmcode{'.'}). the directory is created if it does not exist.
\item[$\bullet$] \texttt{'verbose'} :  if \fcmcode{true}, prints file names. Default is \fcmcode{false}.
\item[$\bullet$] \texttt{'tag'} : if \fcmcode{true} each figure is saved in the file:
$$\fcmcode{[basename,'_fig',fignumber,'_',software,version]}$$
where \fcmcode{software} is \fccmdname\ and  \fcmcode{version} is its release. Default is \fcmcode{false}.
\item[$\bullet$] \texttt{'size'} : to specify size of the image. Default is \fcmcode{[800,600]}.
\end{itemize}

\end{description}

\subsection{xcolor submodule}

\subsubsection[fc\_tools.graphics.xcolor.svg function]{\fcmcode{fc_tools.graphics.xcolor.svg} function}
The \fcmcode{fc_tools.graphics.xcolor.svg} function returns names and RGB values of the $149$ SVG colors.

\paragraph{Syntaxe}
\begin{syntaxe}
[name,rgb]=fc_tools.graphics.xcolor.svg()
\end{syntaxe}

\fcmcode{name} is cell array of string (color names) and \fcmcode{rgb} is $149$-by-$3$ array (rgb values)
such that the color \fcmcode{name\{i\}} has \fcmcode{rgb(i,:)} for rgb values.

\subsubsection[fc\_tools.graphics.xcolor.X11 function]{\fcmcode{fc_tools.graphics.xcolor.X11} function}
The \fcmcode{fc_tools.graphics.xcolor.X11} function returns names and RGB values of the $317$ X11 colors.

\paragraph{Syntaxe}
\begin{syntaxe}
[name,rgb]=fc_tools.graphics.xcolor.X11()
\end{syntaxe}

\fcmcode{name} is cell array of string (color names) and \fcmcode{rgb} is $317$-by-$3$ array (rgb values)
such that the color \fcmcode{name\{i\}} has \fcmcode{rgb(i,:)} for rgb values.


\subsubsection[fc\_tools.graphics.xcolor.display\_colors function]{\fcmcode{fc_tools.graphics.xcolor.display_colors} function}
The \fcmcode{fc_tools.graphics.xcolor.display_colors} function displays SVG colors and X11 colors.

\paragraph{Syntaxe}
\begin{syntaxe}
fc_tools.graphics.xcolor.display_colors()
\end{syntaxe}

\begin{filecontents*}{main.m}
fc_tools.graphics.xcolor.display_colors()
\end{filecontents*}
\begin{filecontents*}{after.m}
fc_tools.graphics.SaveAllFigsAsFiles('display_colors', SaveOptions{:})
\end{filecontents*}
\fcrun{figures/display_colors}

%{\tiny \verbatiminput{results/buildmesh2d01.txt}}
%\fcmatlaboutput{results/siMesh_plot01_\fccmdname\fccmdversionabr.m}{results/siMesh01.txt}
\begin{center}
\fbox{\begin{minipage}{0.95\textwidth}
\fcdblfigure{figures/display_colors_fig1_\fccmdname\fccmdversionabr}{figures/display_colors_fig2_\fccmdname\fccmdversionabr}
%\fcdblfigure{figures/plot2D_fig3_\fccmdname\fccmdversionabr}{figures/plot2D_fig4_\fccmdname\fccmdversionabr}
\par\noparindent\FClistingresize{\lstinputlisting[caption={\fcmcode{fc_tools.graphics.xcolor.display_colors} function \label{Lst:display_colors}}]
{figures/display_colors_\fccmdname\fccmdversionabr.m}}
\end{minipage}}
\end{center}


\end{document}







\section{Introduction}
\input{latex/introduction.tex}

\section{Installation}
\input{latex/TestedOn_\fctoolboxtag_\fccmdname.tex}
\input{latex/installation_\fctoolboxtag_\fccmdname.tex}

\section[fc\_bench.bench function]{\fccode{fc_bench.bench} function}\label{sec:fc_bench.bench}
\input{latex/functions/bench.tex}


\subsection{Matricial product examples}
\input{latex/matricial_product.tex}

\subsection{LU factorization examples}
\input{latex/LU.tex}

\bibliography{biblio}
\bibliographystyle{plain}

\newpage

\begin{center}
{\Large\textbf{Informations for git maintainers of the \ToolboxName \fccmdname\ \ToolboxPackageName }}
\end{center}
\begin{filecontents*}{main.m}
Sep=[repmat('-',1,50),'\n'];
fprintf(Sep)
fc_tools.git.print_gitinfo(fc_bench.gitinfo())
fprintf(Sep)
fc_tools.git.print_gitinfo(fc_tools.gitinfo())
fprintf(Sep)
\end{filecontents*}
\fcrun{codes/gitinfo}[results/gitinfo]

\begin{center}
    \fbox{
      \begin{minipage}{0.95\textwidth}
        \FClistingresize{
          \lstinputlisting[title={git informations on the \ToolboxPackageNames\ used to build this manual},captionpos={t},frame = single,
            language={},numbers=none,backgroundcolor=\color{white},identifierstyle=\color{black},
            basicstyle=\color{black}\small\ttfamily,keywordstyle=\color{black},
            columns=flexible,
            breaklines=true
          ]{results/gitinfo_\fccmdname\fccmdversionabr.out}
        }
      \end{minipage}
    }
    \fclstsetmatlab
  \end{center}

\begin{filecontents*}{main.m}
Sep=[repmat('-',1,50),'\n'];
fprintf(Sep)
fc_tools.git.print_gitinfo(fc_tools.git.get_info('/home/cuvelier/texmf/tex/latex/fctools/'))
fprintf(Sep)
\end{filecontents*}
\fcrun{codes/gitinfo_latex}[results/gitinfo_latex]

\begin{center}
    \fbox{
      \begin{minipage}{0.95\textwidth}
        \FClistingresize{
          \lstinputlisting[title={git informations on the \LaTeX\ package used to build this manual},captionpos={t},frame = single,
            language={},numbers=none,backgroundcolor=\color{white},identifierstyle=\color{black},
            basicstyle=\color{black}\small\ttfamily,keywordstyle=\color{black},
            columns=flexible,
            breaklines=true
          ]{results/gitinfo_latex_\fccmdname\fccmdversionabr.out}
        }
      \end{minipage}
    }
    \fclstsetmatlab
  \end{center}

% \IfFileExists{./fc-config.tex}{}{
%   \immediate\write18{ echo "\string\\\string\\def\string\\\string\\fcconfigcommit\string{$(git ls-remote ssh://lagagit/MCS/Cuvelier/Matlab/fc-config -g HEAD | cut -f 1)\string}" > fc-config.tex} 
%   \immediate\write18{ echo "\string\\\string\\def\string\\\string\\fcconfigremote\string{ssh://lagagit/MCS/Cuvelier/Matlab/fc-config\string}" >> fc-config.tex} 
% }
% \input{fc-config.tex}

\input{latex/build_fcconfig.tex}

Using the remote configuration repository:
\begin{center}
    \fbox{
      %\begin{minipage}{0.95\textwidth}
        \fcresize{0.93}{1.3}{
\begin{tabular}{ll}
 url & \texttt{\fcconfigremote}\\
 commit& \texttt{\fcconfigcommit}
\end{tabular}
}
    }
    \fclstsetmatlab
  \end{center}
  
 \end{document}
